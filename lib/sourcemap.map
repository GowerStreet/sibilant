{"version":3,"sources":["/Users/jbr/code/sibilant/src/sourcemap.sibilant"],"names":[],"mappings":"AAAA,IAAK,UAAL,GAAiB,CAAM,OAAD,CAAS,YAAT,CAAL,EAA6B,YAA7B,CAAjB,C;AAEA,IAAK,SAAL,wBAAiB,IAAjB;AAAA;AAAA;AAAA,SACK;AAAA,QACC,CAAM,WAAD,CAAO,IAAP,CAAL,IAAkB,CAAG,SAAH,KAAc,QAAd,CAAlB,CADD;AAAA,aAEE,KAAK,UAAL,CACK,gBADL,EAEK,eAFL,EAGK,gBAHL,EAIK;AAAA,YAAI,EAAO,aAAP,aAAO,aAAP,mBAAO,aAAP,+BAAJ;AAAA,iBACc,GAAD,CAAK,aAAL,EAAmB,SAAnB,CADb;AAAA;AAAA,iBAEc,SAAD,CAAY,aAAZ,CAFb;AAAA;AAAA,UAJL,EAFF;AAAA,eAUE,CAAI,OAAS,IAAT,cAAJ,IAAmB,QAAS,IAAT,K,QAAA,CAAnB,CAVF;AAAA,aAUsC,aAAD,EAVrC;AAAA;AAAA,MADL;AAAA,G;AAcA,IAAK,YAAL,2BAAmB,IAAnB;AAAA;AAAA;AAAA,EACK,IAAK,WAAL,GAAmB,SAAD,CAAa,SAAD,CAAW,IAAX,CAAZ,CAAlB;AAAA,MACK,GADL,GACS,CAAM,iCAAD,EAAL,EAA+C,KAA/C,CADT,CADL;AAAA,E,WAIiB,C,oBAAA,CAAZ,C,OAAA,WAAO,GAAP;AAAA;AAAA;AAAA,WACO,oBAAD,CAAwB,GAAxB,EAA4B,CAAK,oBAAL,EAA2B,GAA3B,CAA5B,CADN;AAAA,KAJL;AAAA,SAOM,YAAD,EAPL;AAAA","sourcesContent":["(var source-node (get (require \"source-map\") 'Source-node))\n\n(def source-map (node)\n     (if\n      (and (node? node) (= node.type 'output))\n       (new source-node\n            node.source.line\n            node.source.col\n            node.source.file\n            (if (list? node.contents)\n                         (map node.contents source-map)\n                         (source-map node.contents)))\n\n       (or (string? node) (number? node)) (node.to-string)))\n\n\n(def sourcemapper (node)\n     (var source-nodes (source-map (transpile node))\n          map (get (source-nodes.to-string-with-source-map) 'map))\n\n     (each (key) (keys sibilant.source-cache)\n           (map.set-source-content key (get sibilant.source-cache key)))\n\n     (map.to-string))"]}