


<textarea id="when"
	data-title="When"
	language="sibilant/example">
; `when` is the simplest conditional.
; It only considers the true case.
; `when` will return the value of the
; last statement

(var this-will-be-true (when (= 5 (+ 3 2))
  (alert "we've got a five")
  (post-to-twitter "three and two is five")
  true))
</textarea>

<textarea id="if" data-title="If"
	language="sibilant/example">
; `if` is like `when` with an "else."
(var a-or-b (if (< 0.5 (-math.random)) 'a 'b))

; Unlike when, cases may only be a single
; statement. Use progn to execute several
; statements.

(var a-or-b
  (if (< 0.5 (-math.random))
    (progn
      (log "random was more than 0.5")
      'a)
    (progn
      (log "random was less than 0.5")
      'b)))
</textarea>

<textarea id="switch"
	data-title="Switch"
	language="sibilant/example">
; Switch allows you to check a variable
; against any number of possible values.

(var comment (switch month-name
  ('january
    (increment year)
    "happy new year!")
  ('(february march) "still pretty cold")
  ('april "expect showers")
  ("may" "flowers!")
  ('(june july august)
    (enjoy 'sunshine)
    'summer)
  ('(september october) "leaves change")
  ('(november december) "getting chilly")
  (default
    (record-unexpected-month month-name)
    "I didn't recognize that")))

</textarea>

<textarea id="iteration-with-each"
	data-title="Iteration with each"
	language="sibilant/example">
; To iterate over an array, use the each
; macro.

(var list '(a b c d e))
(each (letter) list
  (when (= "C" (letter.to-upper-case))
    (console.log "this was a c"))
  (console.log letter))

</textarea>

<textarea id="while"
	data-title="While"
	language="sibilant/example">
(var wall-bottle-count 99)

(def take-one-down ()
  (decr wall-bottle-count)
  the-bottle)

(while (> wall-bottle-count 0)
  (var bottle (take-one-down))
  (each (person) room
    (while (not (empty? bottle))
      (sip bottle))))
  
</textarea>

<textarea id="chain"
	data-title="Chaining function calls"
	language="sibilant/example">
; It is often idiomatic in javascript libraries
; to chain function calls. Here's how that looks
; in sibilant:

(chain ($ ".some.random#tag")
       (show)
       (css { background-color 'red })
       (animate { width 100 })
       (click (lambda (evt)
         (chain ($ this)
           (hide)
           (data 'clicked true))
         true)))

</textarea>

<textarea id="macro-intro"
	data-title="Sibilant is mostly macros"
	language="sibilant/example">

"Now we're getting into advanced stuff.
Go get a cup of tea or some fresh air.
I'll be here when you get back.

The real power of sibilant is the ability
to define (and redefine) macros, extending
the language.  All constructs can be
redefined. This includes core language
features like +, lambda, if, def, var,
and even macro itself.

Defining macros is as easy as defining
functions, but modify the interpreter
instead of outputting compiled js.
Most of sibilant is defined like this:

http://http://j.mp/sibilantmacros"


</textarea>

<textarea id="defining-macros"
	data-title="Defining your own macros"
	language="sibilant/example">

"As an example, let's say you want to
add a ternary conditional macro to sibilant.
Let's call it 'cond'."

(macro cond (cond true-value false-value)
  (concat (translate cond) " ? "
          (translate true-value) " : "
          (translate false-value) ";"))

(cond (< 0.5 (-math.random)) 'yep 'nah)

; once removed, cond is just a function call
(delmacro cond)
(cond (< 0.5 (-math.random)) 'yep 'nah)

</textarea>


<textarea id="redefining-macros"
	data-title="Redefining existing macros"
	language="sibilant/example">

; All macros can be redefined, and
; most of sibilant is macros.

; Let's say we want to add newlines
; after the commas in a list if
; there are more than two items.

(alias-macro list old-list)

(macro list (&rest args)
  (concat "["
    (if (> 3 args.length)
      (concat " "
        (join ", " (map args translate)) " ")
      (indent (join ",\n" (map args translate))))
    "]"))

(list a b)
(list a b c)
(rename-macro old-list list)

</textarea>

<textarea id="macroexpand"
	data-title="Expanding macros"
	language="sibilant/example">

; Want to find out how a macro is
; defined in js? Try macroexpand.

(macroexpand if)

(macroexpand defined?)

(macroexpand first)


</textarea>


<textarea id="macro-list"
	data-title="Listing available macros"
	language="sibilant/example">

; use macro-list to find out what
; macros are available

(macro-list)

</textarea>

<textarea id="json"
	data-title="JSON is valid sibilant"
	language="sibilant/example">

"Example from http://www.json.org/example.html:"

{"menu": {
  "id": "file",
  "value": "File",
  "popup": {
    "menuitem": [
      {"value": "New", "onclick": "CreateNewDoc()"},
      {"value": "Open", "onclick": "OpenDoc()"},
      {"value": "Close", "onclick": "CloseDoc()"}
    ]
  }
}}
